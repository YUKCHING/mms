webpackJsonp([9,20],{"5Xdm":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("cShy"),o=s("GClJ"),c=s.n(o),r=s("PWgw"),l=s.n(r),d={components:{LoansList:s("IA2S").default},data:function(){return{otherCost:"",form:{name:"张三",idcard:"440307199405180710",phone:"13713697967",carNo:"粤B 34567",city:"深圳",licensingDate:"2017-01-02",mileage:"10.0",standard:"国5"},dataURL:"",showQrcodePicker:!1,qrcode:"",timerSec:0,timer:"",info:{},product:{},audit:{},screenInfo:{},showPreview:!1,showImages:"",previewIndex:0,showProductPopup:!1}},computed:{isSetProduct:function(){return this.product.product_name}},created:function(){this.getInfo()},destroyed:function(){clearTimeout(this.timer)},methods:{getInfo:function(){var t=this,e={order_id:this.$route.query.order_id};Object(n.t)(e).then(function(e){if(0===e.code){var s=t.moment(1e3*e.data.expire_in),i=t.moment(new Date),n=s.diff(i,"minute"),o=Math.floor(n/60),c=n%60;t.info=a()({},e.data,{expire_time:o+":"+c}),t.product=e.data.product,t.audit=e.data.audit,t.screenInfo=e.data.screen_info,t.showImages=[t.screenInfo.id_card_front_img_url,t.screenInfo.id_card_back_img_url,t.screenInfo.vehicle_license_front_img_url,t.screenInfo.vehicle_license_duplicate_img_url]}})},submitAction:function(){var t=this,e={screen_id:this.screenInfo.screen_id,product_id:this.audit.id};Object(n.J)(e).then(function(e){0===e.code&&t.tSuccess("选择成功").then(function(e){t.$router.go(-1)})})},createQrcode:function(){var t=this,e={order_id:this.$route.query.order_id};this.tLoading(),Object(n.d)(e).then(function(e){if(0===e.code){var s=e.data.url;t.getQrcodeImage(s)}else t.tClear()})},getQrcodeImage:function(t){var e=this;this.qrcode=l.a.getQrBase64(t,{padding:0,width:80,height:80,reverse:!1,background:"#ffffff",foreground:"#000000"}),this.showQrcodePicker=!0,setTimeout(function(){e.getHtmlImage()},2e3)},getHtmlImage:function(){var t=this,e=this.$refs.content.scrollTop,s=this.$refs.content.scrollLeft;c()(document.querySelector("#content"),{async:!0,scrollY:-e,scrollX:-s}).then(function(e){var s=e.toDataURL("image/png");t.dataURL=s,t.tClear()})},showImagePreview:function(t){this.previewIndex=t,this.showPreview=!0},onChange:function(t){this.previewIndex=t},selectProductAction:function(){this.showProductPopup=!0},loansSelectAction:function(t){console.log(t),this.showProductPopup=!1,this.audit.id=t.id,this.audit.amount=t.amount,this.audit.monthly_rate=t.monthly_rate,this.product.product_name=t.product_name}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SystemScreen"},[i("div",{staticClass:"loansBlock"},[i("div",{staticClass:"loansTitle"},[i("span",[t._v(t._s(t.product.product_name||"-"))]),t._v(" "),i("div",{staticClass:"button",on:{click:t.selectProductAction}},[t._v("选择产品")])]),t._v(" "),i("div",{staticClass:"loansInfo"},[i("div",{staticClass:"item"},[i("p",[t._v(t._s(t.audit.amount?t.audit.amount:"-"))]),t._v(" "),i("p",[t._v("审批额度")])]),t._v(" "),i("div",{staticClass:"item"},[i("p",[t._v(t._s(t.audit.monthly_rate?t.audit.monthly_rate:"-"))]),t._v(" "),i("p",[t._v("月利率")])]),t._v(" "),i("div",{staticClass:"item"},[i("p",[t._v(t._s(t.audit.time_limit||"-"))]),t._v(" "),i("p",[t._v("申请期限")])])]),t._v(" "),i("div",{staticClass:"other"},[i("van-field",{attrs:{type:"number",label:"其他费用：",placeholder:"请输入"},model:{value:t.otherCost,callback:function(e){t.otherCost=e},expression:"otherCost"}})],1)]),t._v(" "),i("div",{staticClass:"panel"},[i("van-field",{attrs:{label:"姓名",readonly:""},model:{value:t.info.user_name,callback:function(e){t.$set(t.info,"user_name",e)},expression:"info.user_name"}}),t._v(" "),i("van-field",{attrs:{label:"身份证号码",readonly:""},model:{value:t.info.id_card,callback:function(e){t.$set(t.info,"id_card",e)},expression:"info.id_card"}}),t._v(" "),i("van-field",{attrs:{label:"联系电话",readonly:""},model:{value:t.info.mobile,callback:function(e){t.$set(t.info,"mobile",e)},expression:"info.mobile"}})],1),t._v(" "),i("div",{staticClass:"panel panel2"},[t._m(0),t._v(" "),i("div",{staticClass:"car-panel"},[i("p",{staticClass:"p1"},[t._v("2018款 奔驰C级(进口) C 180 旅行轿车")]),t._v(" "),i("div",{staticClass:"base-info"},[i("div",{staticClass:"card"},[t._v(t._s(t.form.city))]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"card"},[t._v(t._s(t.form.licensingDate))]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"card"},[t._v(t._s(t.form.mileage)+"万公里")]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"card"},[t._v(t._s(t.form.standard))])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4)])]),t._v(" "),i("div",{staticClass:"panel panel2"},[t._m(5),t._v(" "),i("van-field",{staticClass:"title-field",attrs:{label:"身份证",readonly:""}}),t._v(" "),i("div",{staticClass:"img-content"},[i("div",{staticClass:"img-panel"},[i("div",{staticClass:"content"},[i("img",{staticClass:"real-img",attrs:{src:t.screenInfo.id_card_front_img_url},on:{click:function(e){return t.showImagePreview(0)}}})])]),t._v(" "),i("div",{staticClass:"img-panel"},[i("div",{staticClass:"content"},[i("img",{staticClass:"real-img",attrs:{src:t.screenInfo.id_card_back_img_url},on:{click:function(e){return t.showImagePreview(1)}}})])])]),t._v(" "),i("div",{staticClass:"remark"},[t._v("\n      备注：\n    ")]),t._v(" "),i("van-field",{staticClass:"title-field",attrs:{label:"行驶证",readonly:""}}),t._v(" "),i("div",{staticClass:"img-content"},[i("div",{staticClass:"img-panel"},[i("div",{staticClass:"content"},[i("img",{staticClass:"real-img",attrs:{src:t.screenInfo.vehicle_license_front_img_url},on:{click:function(e){return t.showImagePreview(2)}}})])]),t._v(" "),i("div",{staticClass:"img-panel"},[i("div",{staticClass:"content"},[i("img",{staticClass:"real-img",attrs:{src:t.screenInfo.vehicle_license_duplicate_img_url},on:{click:function(e){return t.showImagePreview(3)}}})])])]),t._v(" "),i("div",{staticClass:"remark"},[t._v("\n      备注：\n    ")])],1),t._v(" "),t.isSetProduct?t._e():i("div",{staticClass:"buttonPanel"},[i("van-button",{staticClass:"button1",on:{click:t.createQrcode}},[t._v("通知客人修改")]),t._v(" "),i("van-button",{staticClass:"button2",attrs:{type:"danger",disabled:!t.isSetProduct},on:{click:t.submitAction}},[t._v("确定OK")])],1),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showQrcodePicker,callback:function(e){t.showQrcodePicker=e},expression:"showQrcodePicker"}},[i("div",{ref:"content",staticClass:"pop-block",attrs:{id:"content"}},[i("div",{staticClass:"top"},[i("div",{staticClass:"button"},[t._v("\n          请扫码进行系统初筛\n        ")])]),t._v(" "),i("div",{staticClass:"qrcode-block"},[i("img",{attrs:{src:s("tKQY")}}),t._v(" "),i("p",{staticClass:"exp"},[t._v("- 长按可保存图片 -")]),t._v(" "),i("img",{staticClass:"qrcode-img",attrs:{src:t.qrcode}})]),t._v(" "),i("img",{staticClass:"show-img",attrs:{src:t.dataURL}})])]),t._v(" "),i("van-image-preview",{attrs:{images:t.showImages,startPosition:t.previewIndex},on:{change:t.onChange},scopedSlots:t._u([{key:"index",fn:function(){return[t._v("第"+t._s(t.previewIndex+1)+"页")]},proxy:!0}]),model:{value:t.showPreview,callback:function(e){t.showPreview=e},expression:"showPreview"}}),t._v(" "),i("van-popup",{staticClass:"product-popup",attrs:{position:"bottom"},model:{value:t.showProductPopup,callback:function(e){t.showProductPopup=e},expression:"showProductPopup"}},[i("loans-list",{attrs:{select:!0},on:{select:t.loansSelectAction}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("车辆信息")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"base-info",staticStyle:{"margin-bottom":"22px"}},[s("div",{staticClass:"card"},[t._v("所在城市")]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"card"},[t._v("上牌日期")]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"card"},[t._v("行程里数")]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"card"},[t._v("排放标准")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"div-info"},[e("span",[this._v("车牌号")]),this._v(" "),e("span",[this._v("粤B 34567")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"div-info"},[e("span",[this._v("注册日期")]),this._v(" "),e("span",[this._v("2017-01-10")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"div-info"},[e("span",[this._v("发证日期")]),this._v(" "),e("span",[this._v("2017-01-10")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("上传资料")])])}]};var u=s("C7Lr")(d,v,!1,function(t){s("IvN7")},"data-v-c3181bc0",null);e.default=u.exports},AIbg:function(t,e){},IA2S:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n={props:{data:{type:Object,default:function(){return{}}},select:{type:Boolean,default:!1}},data:function(){return{isChoice:!1}},methods:{showDetail:function(){this.select||this.$emit("click",this.data.id)},checkBoxSelect:function(t){this.$emit("change",t,this.data.id)}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block",on:{click:t.showDetail}},[s("div",{staticClass:"top"},[s("span",{staticClass:"title"},[t._v(t._s(t.data.product_name))]),t._v(" "),s("span",{staticClass:"chara"},[t._v(t._s(t.data.product_label))])]),t._v(" "),s("div",{staticClass:"middle"},[s("div",[s("p",{staticStyle:{color:"#FE3525"}},[t._v(t._s(t.data.monthly_rate))]),t._v(" "),s("p",{staticClass:"name"},[t._v("综合月利润")])]),t._v(" "),s("div",[s("p",[t._v(t._s(t.data.amount))]),t._v(" "),s("p",{staticClass:"name"},[t._v("可贷额度")])])]),t._v(" "),s("div",{staticClass:"bottom"},t._l(t.data.feature,function(e){return s("span",{key:e},[t._v(t._s(e))])}),0),t._v(" "),t.select?s("van-checkbox",{attrs:{"checked-color":"#E02020"},on:{change:t.checkBoxSelect},model:{value:t.isChoice,callback:function(e){t.isChoice=e},expression:"isChoice"}}):t._e()],1)},staticRenderFns:[]};var c=s("C7Lr")(n,o,!1,function(t){s("AIbg")},"data-v-5f6e06e0",null).exports,r=s("0P7c"),l=s("cShy"),d=s("RJut"),v={components:{LoansBlock:c,QrOverlay:r.a},props:{select:{type:Boolean,default:!1}},beforeCreate:function(){window.shareUrl=location.href.split("#")[0]},data:function(){return{lists:[],searchKey:""}},created:function(){this.init()},methods:{init:function(){var t=this,e="超10款车贷产品\r\n总有一款适合您!";if(window.isReady){var s="http://api.tainuocar.com/home/"+this.$route.name+"?invite="+this.$store.getters.userInfo.invite_code;this.initWxShare(window.shareUrl,"泰诺汽车平台-泰诺产品",e,s)}else Object(d.a)(this.$route).then(function(s){if(s&&-1000104===s.code)t.bus.$emit("showQrOverlay");else{var i="http://api.tainuocar.com/home/"+t.$route.name+"?invite="+t.$store.getters.userInfo.invite_code;t.initWxShare(window.shareUrl,"泰诺汽车平台-泰诺产品",e,i),window.isReady=!0}});this.getProductList()},getProductList:function(){var t=this,e={token:this.$store.getters.token,limit:"99",page:"1",search:"平安",sort:""};Object(l.A)(e).then(function(e){0===e.code&&e&&(t.lists=e.data.list.map(function(t){return a()({},t,{monthly_rate:t.monthly_rate+"%"})}))}).catch(function(){})},showDetail:function(t){this.$router.push({path:"/loansdetail",query:{token:this.$router.history.current.query.token,productid:t}})},loadnsBlockChange:function(t,e){t&&this.$refs.loansBlock.forEach(function(t){t.data.id!==e&&(t.isChoice=!1)})},confirmAction:function(){var t="";if(this.$refs.loansBlock.forEach(function(e){e.isChoice&&(t=e.data.id)}),t){var e;e=this.lists.find(function(e){return e.id===t}),this.$emit("select",e)}else this.toast("请选择产品")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loans-list"},[s("div",{staticClass:"top-block"},[s("van-field",{attrs:{placeholder:"请输入产品名",clearable:""},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[s("van-icon",{attrs:{slot:"left-icon",color:"#F9CFD0",name:"search"},slot:"left-icon"})],1)],1),t._v(" "),s("div",{staticClass:"content"},t._l(t.lists,function(e){return s("loans-block",{key:e.id,ref:"loansBlock",refInFor:!0,attrs:{data:e,select:t.select},on:{click:t.showDetail,change:t.loadnsBlockChange}})}),1),t._v(" "),t.select?s("van-button",{staticClass:"confirmButton",on:{click:t.confirmAction}},[t._v("确 定")]):t._e(),t._v(" "),s("qr-overlay")],1)},staticRenderFns:[]};var _=s("C7Lr")(v,u,!1,function(t){s("jZpd")},"data-v-ffd0135c",null);e.default=_.exports},IvN7:function(t,e){},jZpd:function(t,e){},tKQY:function(t,e,s){t.exports=s.p+"static/img/share-bottom.02fe41d.png"}});